<?xml version="1.0"?>
<robot name="basic-rocke" xmlns:xacro="http://ros.org/wiki/xacro">
 <!--###################### XACRO ######################-->
    <xacro:property name="chasis_width" value="0.6"/>
    <xacro:property name="chasis_length" value="1"/>
    <xacro:property name="chasis_height" value="0.2"/>
    <xacro:property name="leg_radius" value="0.05"/>
    <xacro:property name="leg_length" value="0.5"/>
    <xacro:property name="leg_rotation" value="0.79"/>

    <xacro:property name="front" value="1"/>
    <xacro:property name="back" value="-1"/>
    <xacro:property name="right" value="1"/>
    <xacro:property name="left" value="-1"/>
   
    <xacro:macro name="leg" params="prefix_l fb lr"> 
        <link name="${prefix_l}_leg">
            <visual>
                <geometry>
                    <cylinder radius="${leg_radius}" length="${leg_length}"/>
                </geometry>
                <origin xyz="0.0 0.0 0.0" rpy="${fb*0.79} 0.0 0.0"/>
            </visual>
        </link>

        <joint name="base_to_${prefix_l}_leg" type="fixed">
            <parent link="base_link"/>
            <child link="${prefix_l}_leg"/>
            <origin xyz="${lr*chasis_width/2} ${fb*chasis_width/2} ${-leg_length/2} " rpy="0 0 0"/>
        </joint>
    </xacro:macro>

    <xacro:macro name="wheel" params="prefix_w lr_w">
        <link name="${prefix_w}_wheel">
            <visual>
                <geometry>
                    <cylinder radius="0.1" length="0.2"/>
                </geometry>
            <origin xyz="0 0 0" rpy="0 1.57 0"/>  
            </visual>
        </link>

        <joint name="${prefix_w}_leg_to_wheel" type="continuous">
            <origin xyz="0 ${lr_w*leg_length/2} ${-leg_length/2}" rpy="0 0 0"/>
            <parent link="${prefix_w}_leg"/>
            <child link="${prefix_w}_wheel"/>
        </joint>
    </xacro:macro>

 <!--###################### MATERIAL ######################-->
    <material name="black">
        <color rgba="0 0 0 1"/>
    </material>
    <material name="white">
        <color rgba="1 1 1 1"/>
    </material>
    <material name="gray">
        <color rgba="0.0 0.8 0.0 1.0"/>
    </material>

 <!--###################### LINKS ######################-->
    <link name="base_link">
        <visual>
            <geometry>
                <box size="${chasis_width} ${chasis_length} ${chasis_height}"/>
            </geometry>
        </visual>
    </link>

    <xacro:leg prefix_l="fr" fb="${front}" lr="${right}"/>
    <xacro:leg prefix_l="fl" fb="${front}" lr="${left}"/>
    <xacro:leg prefix_l="br" fb="${back}" lr="${right}"/>
    <xacro:leg prefix_l="bl" fb="${back}" lr="${left}"/>

    <xacro:wheel prefix_w="fr" lr_w="${right}"/>
    <xacro:wheel prefix_w="fl" lr_w="${left}"/>
    <xacro:wheel prefix_w="br" lr_w="${right}"/>
    <xacro:wheel prefix_w="bl" lr_w="${left}"/>
    
</robot>